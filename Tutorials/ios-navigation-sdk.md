---
title: Build a navigation app for iOS
description: Integrate navigation into any iOS application.
thumbnail: iosNavigationSdk
level: 3
topics:
- mobile apps
- directions
language:
- Swift
- Objective-C
prereq: Familiarity with Xcode, Swift or Objective-C, and CocoaPods or Carthage.
prependJs:
  - "import * as constants from '../../constants';"
  - "import Note from '@mapbox/dr-ui/note';"
  - "import BookImage from '@mapbox/dr-ui/book-image';"
  - "import { IosCodeToggle } from '../../components/ios-code-toggle'"
  - "import * as snippet from '../../snippets/ios-navigation-sdk.js'"
contentType: tutorial
---

The Mapbox Navigation SDK for iOS gives you all the tools you need to add turn-by-turn navigation to your iOS app. You can get up and running in a few minutes with our drop-in navigation view controller, or build a completely custom app with our core components for routing and navigation. In this guide, you'll create a minimal navigation app, begin navigation by selecting a point on the map, and change the style of the navigation view controller.

{{
<div className='my12 p2 clearfix align-center'>
  <div className='device contain device-phone-v'><img alt='an animated GIF of a navigation iOS app with turn-by-turn instruction' src='/help/img/ios/nav-sdk-full-nav.gif' className='hmax360' /></div>
</div>
}}

## Getting started

The [Mapbox Navigation SDK for iOS](https://docs.mapbox.com/ios/navigation/) runs on iOS 9.0 and above. It can be used with code written in either Swift 4 and above or Objective-C. Here are the resources you’ll need before getting started:

- **A Mapbox account and access token**. Sign up for an account at [mapbox.com/signup](https://www.mapbox.com/signup/). You can find your [access tokens](/help/how-mapbox-works/access-tokens) on your [Account page](https://www.mapbox.com/account/). You will add your access token to your Info.plist file as described in the [installation instructions](https://www.mapbox.com/install/ios/).
- **An application including the Mapbox Maps SDK for iOS.** This guide assumes that you have already begun building an iOS application that uses the Mapbox Maps SDK for iOS. If you're new to the Mapbox Maps SDK for iOS, complete the [First steps with the Mapbox Maps SDK for iOS](/help/tutorials/first-steps-ios-sdk/) guide to set up a map view first.

## Install the Navigation SDK for iOS

You can install the Mapbox Navigation SDK for iOS using either CocoaPods or Carthage. If you are new to CocoaPods or Carthage, you can get started with documentation for [CocoaPods](https://guides.cocoapods.org/using/getting-started.html) and [Carthage](https://github.com/Carthage/Carthage/#adding-frameworks-to-an-application).

### Install the framework

You'll need to add `MapboxNavigation` to your build to use the Mapbox Navigation SDK, map services, and directions services.

Cocoa pods:

```
pod 'MapboxNavigation', '~> {{constants.VERSION_IOS_NAV}}'
```

Carthage:

```
github "mapbox/mapbox-navigation-ios" ~> {{constants.VERSION_IOS_NAV}}
```


### Import the framework

After you've added this to your build, you'll need to import the following modules into your `ViewController` to access them in your application.

{{
  <IosCodeToggle
    id='import-the-framework-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [1,4]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [1,5]
    ]}
  />
}}

## Initialize a map

Once you've imported the classes in the previous step, you'll be able to initialize a map. Use `NavigationMapView` to display the default Mapbox Streets map style. `NavigationMapView` is a subclass of `MGLMapView` that provides additional functionality (like displaying a route on the map) that is helpful for navigation apps specifically. The `directionsRoute` variable will be used later to reference a route that will be generated by the Mapbox Navigation SDK. Add the following code within the view controller.

{{
  <IosCodeToggle
    id='initialize-a-map-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [6,18],
      [27,27],
      [104,104]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [7,23],
      [32,32],
      [127,127]
    ]}
  />
}}


Run your application, and you will see a new map.

{{
<div className='my12 p2 clearfix align-center'>
  <div className='device contain device-phone-v'><img alt='a map in an iOS application' src='/help/img/ios/nav-sdk-initialize-map.jpeg' className='hmax360' /></div>
</div>
}}

{{
    <Note
      title='More resources'
      imageComponent={<BookImage />}
    >
        <p>There's a lot more that you can do with the Mapbox Maps SDK for iOS. To see what's possible, explore our <a href='/help/tutorials/first-steps-ios-sdk/'>First steps with the Mapbox Maps SDK for iOS</a> and <a href='/help/tutorials/ios-dds-circle-layer'>Data-driven styling for iOS</a> tutorials.</p>
    </Note>
}}

### Display user location

For this project, you'll get directions between a user's location and a point they have placed on the map. To do this, you'll need to configure location permissions within your application to use the device's location services. Before you can draw a user’s location on the map, you must ask for their permission and give a brief explanation of how your application will use their location data.

Configure location permissions by setting the `NSLocationAlwaysUsageDescription` or `NSLocationWhenInUseUsageDescription` key in the Info.plist file. We recommend setting the value to the following string, which is the application's location usage description: `Shows your location on the map and helps improve OpenStreetMap`. When a user opens your application for the first time, they will see an alert that asks them if they would like to allow your application to access their location.

{{
  <Note imageComponent={<BookImage />}>
    <p>In iOS 11, if you wish to access a user's location, you <strong>must</strong> include the <code>NSLocationWhenInUseUsageDescription</code> key within the Info.plist file. For more information location tracking in iOS 11, we recommend watching Apple's <a href="https://developer.apple.com/videos/play/wwdc2017/713/">"What's New in Location Technologies"</a> video.</p>
  </Note>
}}

Once you have configured your application's location permissions, display the device's current location on the map by setting the [`showsUserLocation`](https://docs.mapbox.com/ios/api/maps/{{constants.VERSION_IOS_MAPS}}/Classes/MGLMapView.html#/c:objc(cs)MGLMapView(py)showsUserLocation) property on the map view to `true` within the `viewDidLoad` method, and set the [`MGLUserTrackingMode`](https://docs.mapbox.com/ios/api/maps/{{constants.VERSION_IOS_MAPS}}/Classes/MGLMapView.html#/c:objc(cs)MGLMapView(py)userTrackingMode) to `follow` so that the map view adjusts if the user's location changes. Update the code within the `viewDidLoad` method in your view controller to show the user's location and set the tracking mode.

{{
  <IosCodeToggle
    id='display-user-location-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [20,22]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [25,27]
    ]}
  />
}}

When you run your app in Simulator or on your phone, you’ll be presented with a dialog box asking for permission to use Location Services. Click **Allow**. You won’t see your location on the map until you go to Simulator’s menu bar and select **Debug ‣ Location ‣ Custom Location**. Enter `38.909` for latitude, `-77.036` for longitude.

{{
<div className='my12 clearfix align-center'>
  <div className='device contain device-phone-v'><img alt="a map displaying a user's location on an iOS device" src='/help/img/ios/nav-sdk-show-user-location.gif' className='hmax360' /></div>
</div>
}}

### Add a destination point

In this application, you'll assume that the user wants to retrieve a route between their current location and any point that they select on the map. Next, you'll create the ability to add a marker, or [annotation](/help/glossary/annotation/), to the map when the user taps and holds down on the map (a [long press](https://developer.apple.com/documentation/uikit/uilongpressgesturerecognizer)). This destination will be used when calculating the route for navigation.

#### Create a gesture recognizer

Start by creating a new method called `didLongPress`. Within this method, get the point that has been selected by the user and store it in a variable called `point`. Then, convert that point into a geographic coordinate and store it in a variable called `coordinate`. Create a new [`MGLPointAnnotation`](https://docs.mapbox.com/ios/api/maps/{{constants.VERSION_IOS_MAPS}}/Classes/MGLPointAnnotation.html) at the coordinate you defined, and set a title. The title will later be displayed within a callout that appears when the annotation is selected. One the annotation has been configured, add it to the map. Add a new `didLongPress` method within your view controller as shown below.

{{
  <IosCodeToggle
    id='create-a-gesture-recognizer-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [29,40],
      [48,48]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [35,47],
      [57,57]
    ]}
  />
}}


Later on, you will add another method to calculate the route from the origin to your destination within this method.

Update the `viewDidLoad` method to add a `UILongPressGestureRecognizer` to your `NavigationMapView` so it will accept the newly created gesture recognizer.

{{
  <IosCodeToggle
    id='change-viewdidload-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [24,26]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [29,31]
    ]}
  />
}}

When you run your app again, you will see the map centered on the user's location. But this time, if you tap and hold anywhere on the map, a new marker will be dropped at the location the user specifies. This point marks the desired final destination for the route. Next, you'll create a method to calculate the route itself.

## Generate a route

To generate a route, you'll need to create a new `Route` object. When you install the Navigation SDK, it also includes `MapboxDirections.swift`. This provides a convenient way to access the [Mapbox Directions API](https://docs.mapbox.com/api/navigation/#directions) in iOS applications, and is used to generate a `Route` object that can be used by the Navigation SDK to display turn-by-turn directions.

The Mapbox Directions API requires at least two waypoints to generate a route. You can include up to 25 waypoints in total. Read more about waypoints in the [MapboxDirections.swift documentation](https://docs.mapbox.com/ios/api/directions/{{constants.VERSION_DIRECTIONS_SWIFT}}/Classes/Waypoint.html).

For this project, you'll use two waypoints: an **origin** and a **destination**. For this case, the origin will be user's location. The destination will be a point specified by the user when they drop a point on the map. For each waypoint, you'll specify the latitude and longitude of the location and a name that describes the location and add them using the `Waypoint` class.

Begin creating a full navigation experience by creating a new `calculateRoute` method that contains the following code:

{{
  <IosCodeToggle
    id='generate-a-route-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [50,65],
      [67,68]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [59,85],
      [87,88]
    ]}
  />
}}

#### Route options

After creating the method that will create your route, set a few options to generate a route from the origin to the destination using the `NavigationRouteOptions` class. This class is a subclass of `RouteOptions` from MapboxDirections.swift. You can specify any of the same options you could using the `RouteOptions` class found in MapboxDirections.swift, but the defaults are better suited to how the Navigation SDK uses the resulting routes. In this example, you'll use the default options, which include high-resolution routes and steps used for turn-by-turn instruction.

{{
    <Note title='NavigationRouteOptions' imageComponent={<BookImage />}>
        <p>Read about all available <code>NavigationRouteOptions</code> in the <a href={https://docs.mapbox.com/ios/api/navigation/{constants.VERSION_IOS_NAV}/Classes/NavigationRouteOptions.html}>Navigation SDK for iOS documentation</a>.</p>
    </Note>
}}

## Drawing the route on the map

Now that you've created a method to calculate the route, create another method to _draw_ the route on the map. Start by creating a variable to reference your route object within your entire view controller class. Then, create a method that accepts in a `Route` object. Use the incoming `Route` object to create a new `MGLPolylineFeature` from the route's coordinates. After creating the `MGLPolylineFeature`, add it to the map with a corresponding style layer while configuring various style properties such as line color and line width. Create a new method called `drawRoute` within your view controller.



{{
    <Note imageComponent={<BookImage />}>
        <p><code>MGLPolylineFeature</code> is one of many available primitive shape objects that can be added to a map. Read more about adding shapes to a map in the <a href={https://docs.mapbox.com/ios/api/maps/{constants.VERSION_IOS_MAPS}/Primitive%20Shapes.html#/Primitive%20Shapes}>Maps SDK for iOS documentation</a>.</p>
    </Note>
}}

Now, allow your user to see the route from their selected destination, change the `calculateRoute` method to call the `drawRoute` method within it.

{{
  <IosCodeToggle
    id='drawing-the-route-on-the-map-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [66,66],
      [70,91]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [86,86],
      [90,114]
    ]}
  />
}}

Update the `didLongPress` method so that the `calculateRoute` method is called within it. This will allow the route to be calculated and drawn when the user performs a long press gesture on the map.

{{
  <IosCodeToggle
    id='call-calculate-route-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [42,47]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [49,56]
    ]}
  />
}}

Run your application, and do a long press on the map to set your destination. When the marker is added to the map, the route is calculated and drawn on the map.

{{
<div className='my12 p2 clearfix align-center'>
  <div className='device contain device-phone-v'><img alt='drawing a navigation route in an iOS app' src='/help/img/ios/nav-sdk-draw-route.gif' className='hmax360' /></div>
</div>
}}

## Starting navigation

To start the turn-by-turn navigation sequence, allow the marker to show a callout and allow that callout to be selected by implementing the `annotationCanShowCallout` and `tapOnCalloutFor` delegate methods. When the callout is tapped, present a new `NavigationViewController` using the route that was generated. Add these two new methods within your view controller.

{{
  <IosCodeToggle
    id='start-navigating-code'
    swiftCode={snippet.finalSwift}
    swiftCopyRanges={[
      [93,102]
    ]}
    objectiveCCode={snippet.finalObjc}
    objectiveCCopyRanges={[
      [116,125]
    ]}
  />
}}


## Finished product

Run the application and then select and hold on the map to add an annotation. Select the annotation to display a callout, and then select the callout to initialize navigation sequence between the origin and your specified destination. You built a small navigation app with the Mapbox Navigation SDK for iOS. You can find the [full code for this tutorial](https://github.com/mapbox/navigation-ios-examples/blob/master/DocsCode/NavigationTutorial/)  on GitHub.

{{
<div className='my12 p2 clearfix align-center'>
  <div className='device contain device-phone-v'><img alt='an animated GIF of a navigation iOS app with turn-by-turn instruction' src='/help/img/ios/nav-sdk-full-nav.gif' className='hmax360' /></div>
</div>
}}

{{
  <IosCodeToggle
    id='finished-product-code'
    swiftCode={snippet.finalSwift}
    objectiveCCode={snippet.finalObjc}
  />
}}

## Next steps

There are many other ways you can customize the Mapbox Navigation SDK for iOS beyond what you've done in this tutorial. For a complete reference of customization options see the [Navigation SDK for iOS documentation](https://docs.mapbox.com/ios/api/navigation/{{constants.VERSION_IOS_NAV}}/). Options include:

- [Walking and cycling modes](https://docs.mapbox.com/ios/api/directions/{{constants.VERSION_DIRECTIONS_SWIFT}}/Classes/RouteOptions.html#/s:vC16MapboxDirections12RouteOptions17profileIdentifierVSC29MBDirectionsProfileIdentifier).
- Delivering [voice instructions using third-party speech synthesizer](https://docs.mapbox.com/ios/navigation/examples/custom-voice-controller/).
- Building a custom turn-by-turn experience using [Core Navigation](https://github.com/mapbox/mapbox-navigation-ios/blob/v{{constants.VERSION_IOS_NAV}}/custom-navigation.md).
